# apphosting.yaml
runConfig:
  minInstances: 0
  # maxInstances: 100
  # concurrency: 80
  # cpu: 1
  # memoryMiB: 512

# === CUSTOM RUN COMMAND (REQUIRED FOR SERVER) ===
run:
  command: node
  args: ["--loader=tsx/esm", "server.ts"]
  port: 8080
  healthCheck:
    path: /healthz
    timeout: 120s  # Extended from 60s

# === ENVIRONMENT VARIABLES ===
env:
  - variable: NODE_ENV
    value: production
    availability:
      - RUNTIME
  - variable: PORT
    value: "8080"
    availability:
      - RUNTIME

# === SECRETS (Optional for later) ===
# - variable: GEMINI_API_KEY
#   secret: gemini-api-key
#   availability:
#     - RUNTIME